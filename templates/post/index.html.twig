{% extends 'base.html.twig' %}

  {% block title %}Posts{% endblock %}

  {% block body %}
      <div class="container mt-5">
          {# Заголовок с кнопкой создания #}
          <div class="d-flex justify-content-between align-items-center mb-4">
              <h1>
                  <i class="bi bi-file-text"></i> Posts
                  <span class="badge bg-secondary">{{ posts|length }}</span>
              </h1>
              <a href="{{ path('app_post_new') }}" class="btn btn-primary">
                  <i class="bi bi-plus-circle"></i> Create New Post
              </a>
          </div>

          {# Красивая таблица с Bootstrap #}
          <div class="card shadow">
              <div class="card-body p-0">
                  <div class="table-responsive">
                      <table class="table table-hover table-striped mb-0">
                          <thead class="table-dark">
                          <tr>
                              <th style="width: 80px">#ID</th>
                              <th>Title</th>
                              <th>Text</th>
                              <th style="width: 200px" class="text-center">Actions</th>
                          </tr>
                          </thead>
                          <tbody>
                          {% for post in posts %}
                              <tr>
                                  <td class="fw-bold">{{ post.id }}</td>
                                  <td>{{ post.title }}</td>
                                  <td>
                                      {{ post.text|length > 50
                                      ? post.text|slice(0, 50) ~ '...'
                                      : post.text }}
                                  </td>
                                  <td class="text-center">
                                      <div class="btn-group" role="group">
                                          <a href="{{ path('app_post_show', {'id': post.id}) }}"
                                             class="btn btn-sm btn-info"
                                             title="View">
                                              <i class="bi bi-eye"></i>
                                          </a>
                                          <a href="{{ path('app_post_edit', {'id': post.id}) }}"
                                             class="btn btn-sm btn-warning"
                                             title="Edit">
                                              <i class="bi bi-pencil"></i>
                                          </a>
                                      </div>
                                  </td>
                              </tr>
                          {% else %}
                              <tr>
                                  <td colspan="4" class="text-center py-5 text-muted">
                                      <i class="bi bi-inbox" style="font-size: 3rem;"></i>
                                      <p class="mt-2">No posts found</p>
                                      <a href="{{ path('app_post_new') }}" class="btn btn-primary">
                                          Create First Post
                                      </a>
                                  </td>
                              </tr>
                          {% endfor %}
                          </tbody>
                      </table>
                  </div>
              </div>
          </div>
      </div>
  {% endblock %}
